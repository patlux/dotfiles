#!/bin/sh

TARGET="$HOME/Pictures/wallpaper/.wallpaper"
IMAGE=${1:-$TARGET}

notify-send 'Set wallpaper' $IMAGE

# ---------------------------------------------------------------------------- #
# MODIFY IMAGE

/usr/bin/cp "$IMAGE" "$TARGET" &> /dev/null

read RES_X RES_Y <<<$(xdpyinfo | awk -F'[ x]+' '/dimensions:/{print $3, $4}')

gm mogrify \
  -compress JPEG \
  -quality 100 \
  -crop "$RES_X"x"$RES_Y"+0+0 \
  -region "$RES_X"x18+0+0 \
  -blur 10x25 \
  "$TARGET"



# ---------------------------------------------------------------------------- #
# SET BACKGROUND IMAGE

hsetroot -center "$TARGET"
